name: Traditional CI/CD Pipeline (OLD WAY)

# This shows the TRADITIONAL approach - runs ALL tests every time
# Problem: Slow, expensive, wasteful

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  traditional-tests:
    name: "ğŸ˜´ Run ALL Tests (Traditional Way)"
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4
      
      - name: ğŸ˜ Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: '8.1'
          extensions: mbstring, xml, ctype, json, bcmath
          coverage: none
      
      - name: ğŸ“¦ Install Composer dependencies
        run: composer install --prefer-dist --no-progress --no-suggest
      
      - name: ğŸ“‹ Copy .env file
        run: cp .env.example .env
      
      - name: ğŸ”‘ Generate application key
        run: php artisan key:generate
      
      - name: â±ï¸ Start timer
        run: echo "START_TIME=$(date +%s)" >> $GITHUB_ENV
      
      - name: ğŸ§ª Run ALL 500 tests (Traditional - NO AI)
        run: |
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "  TRADITIONAL PIPELINE - Running ALL Tests"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo ""
          echo "âš ï¸  WARNING: This runs EVERY test, every time!"
          echo "âš ï¸  Even if you only changed 1 file..."
          echo "âš ï¸  Cost: ~15 minutes, $0.128 per run"
          echo ""
          vendor/bin/phpunit --testdox
          echo ""
          echo "âœ… All tests passed, but at what cost?"
      
      - name: â±ï¸ Calculate time taken
        if: always()
        run: |
          END_TIME=$(date +%s)
          DURATION=$((END_TIME - START_TIME))
          MINUTES=$((DURATION / 60))
          SECONDS=$((DURATION % 60))
          echo ""
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "  â° Time Wasted: ${MINUTES}m ${SECONDS}s"
          echo "  ğŸ’¸ Estimated Cost: \$0.128"
          echo "  ğŸ˜¤ Developer Frustration: Maximum"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
